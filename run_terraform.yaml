- name: Run Terraform from AWX EE
  hosts: all
  gather_facts: false
  tasks:
    - name: List contents of project folder
      command: ls -la /runner/project/
      
    - name: Initialize Terraform
      command: terraform init
      args:
        chdir: /runner/project/terraform-test

    - name: Plan Terraform
      command: terraform plan
      args:
        chdir: /runner/project/terraform-test

    - name: Apply Terraform
      command: terraform apply -auto-approve
      args:
        chdir: /runner/project/terraform-test
